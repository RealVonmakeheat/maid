# üßπ Maid CLI Tool

![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/Realvonmakeheat/maid/rust.yml?branch=master)
![GitHub release (latest by date)](https://img.shields.io/github/v/release/Realvonmakeheat/maid)
![Crates.io](https://img.shields.io/crates/v/maid)
![License](https://img.shields.io/github/license/Realvonmakeheat/maid)

> A command-line tool for cleaning up and restructuring files generated by AI coding assistants, making them more human-readable and organized.

<p align="center">
  <img src="https://github.com/Realvonmakeheat/maid/raw/master/assets/maid-logo.png" alt="Maid Logo" width="300"/>
</p>

**Maid** helps you tame the chaos of AI-generated files, turning cryptic filenames like `DOCUMENTATION_REFACTORING_SUMMARY.md` into clean, organized, human-friendly documentation.

## üìä Features

- üîç **Smart File Detection**: Identifies AI-generated markdown (.md) and shell script (.sh) files
- üè∑Ô∏è **Intelligent Classification**: Categorizes files by type (rubric, report, guide, summary, script)
- ‚úèÔ∏è **Human-Friendly Renaming**: Transforms cryptic filenames into descriptive, readable formats
- üìÅ **Logical Restructuring**: Organizes files into a coherent directory hierarchy
- üîÑ **Recursive Processing**: Supports cleaning entire directory trees
- üîÆ **Preview Mode**: Dry-run option to preview changes without applying them
- üß† **Redundancy Management**: "Keep" command to identify and preserve only the most important files
- üóëÔ∏è **Self-Destructing Trash**: Moves unwanted files to a temporary bin that cleans itself up
- üìù **Rubric Generation**: Creates comprehensive project rubrics based on content analysis

## Usage

```bash
# Clean up files in current directory
maid clean

# Clean up files in a specific directory
maid clean --path /path/to/directory

# Clean up files recursively
maid clean --path /path/to/directory --recursive

# Restructure files into organized folders based on type
maid clean --path /path/to/directory --restructure

# Combine flags for more comprehensive cleaning
maid clean --path /path/to/directory --recursive --restructure

# Dry run (don't actually change anything)
maid clean --path /path/to/directory --dry-run

# Verbose output
maid clean --path /path/to/directory --verbose

# Keep important files and move others to a temporary trash bin
maid keep --path /path/to/directory

# Keep important files with recursive search
maid keep --path /path/to/directory --recursive

# Keep important files with detailed output
maid keep --path /path/to/directory --verbose
```

## Installation

### One-line installer
```bash
curl -sSL https://raw.githubusercontent.com/Realvonmakeheat/maid/main/install_maid.sh | bash
```

### From crates.io (Coming Soon)
```bash
cargo install maid-cli
```

### From source
```bash
# Clone the repository
git clone https://github.com/Realvonmakeheat/maid.git
cd maid

# Build and install
cargo build --release
sudo cp target/release/maid /usr/local/bin/
```

### Homebrew (Coming Soon)
```bash
brew install Realvonmakeheat/tap/maid
```

### Terminal Integration

Maid can be integrated into your terminal workflow with the following configuration.

#### Bash/Zsh Integration

Add this to your `.bashrc` or `.zshrc`:

```bash
# Maid file monitor function
maid_monitor() {
    # Run in background, check for .md and .sh file changes
    (
        while true; do
            find . -type f \( -name "*.md" -o -name "*.sh" \) -mtime -1 | 
            sort | uniq | 
            while read file; do
                echo "[Maid] Detected change in $file"
            done
            sleep 60
        done
    ) &
}

# Alias for quick access
alias maid-clean='maid clean --verbose'
alias maid-keep='maid keep --verbose'

# Auto-activate for project directories
cd() {
    builtin cd "$@"
    if [ -f "README.md" ] || [ -d "docs" ]; then
        echo "üìÅ Project directory detected. Maid is watching for file changes."
        maid_monitor
    fi
}
```

#### Fish Shell Integration

Create a file at `~/.config/fish/functions/maid_monitor.fish`:

```fish
function maid_monitor
    # Run in background, check for .md and .sh file changes
    fish -c "
        while true
            find . -type f \( -name \"*.md\" -o -name \"*.sh\" \) -mtime -1 | 
            sort | uniq | 
            while read -l file
                echo \"[Maid] Detected change in \$file\"
            end
            sleep 60
        end
    " &
end

# Alias for quick access
alias maid-clean='maid clean --verbose'
alias maid-keep='maid keep --verbose'

# Auto-activate for project directories
function cd
    builtin cd $argv
    if test -f "README.md"; or test -d "docs"
        echo "üìÅ Project directory detected. Maid is watching for file changes."
        maid_monitor
    end
end
```

#### Neovim/Lua Integration

For Neovim users, add this to your `init.lua` or create `maid.lua` in your plugin directory:

```lua
-- Maid integration for Neovim
local maid = {}

-- Monitor changes to markdown and shell files
function maid.setup()
  vim.api.nvim_create_autocmd({"BufWritePost"}, {
    pattern = {"*.md", "*.sh"},
    callback = function(ev)
      local filename = vim.fn.expand("%:p")
      vim.notify("[Maid] Detected change in " .. filename, vim.log.levels.INFO)
    end,
  })
  
  -- Add Maid commands
  vim.api.nvim_create_user_command("MaidClean", function()
    vim.cmd("!maid clean --verbose")
  end, {})
  
  vim.api.nvim_create_user_command("MaidKeep", function()
    vim.cmd("!maid keep --verbose")
  end, {})
  
  -- Add status line component
  vim.g.maid_enabled = true
end

return maid
```

## The "Keep" Command

The `maid keep` command is designed to help you manage documentation clutter by:

1. Analyzing all markdown and shell files in a directory
2. Identifying which files are most important based on content and type
3. Moving redundant files to a self-destructing trash bin
4. Generating a comprehensive project rubric based on the important files

### How It Works

When you run `maid keep`, the tool:

1. Finds all markdown (.md) and shell script (.sh) files in the specified directory
2. Groups files by type (rubric, report, guide, summary, script)
3. For each group:
   - Keeps the most comprehensive rubric
   - Keeps the most recent report and summary
   - Keeps all guides
   - Keeps unique scripts (removing duplicates)
4. Moves redundant files to a temporary trash bin
5. Creates a comprehensive project rubric that combines insights from all kept files
6. Launches a self-destructing trash bin that will automatically delete when you close the terminal

### Why This Matters

Research has shown that having too many redundant documentation files can confuse AI assistants and lead to hallucinations. By keeping only the most relevant and comprehensive files, you:

- Reduce clutter in your project
- Make it easier for humans to find important documentation
- Improve the quality of AI responses when working with your codebase
- Maintain a clear record of project requirements and progress

## ü§ñ Built with GitHub Copilot

This project was built in collaboration with GitHub Copilot. What would have taken days of planning, coding, and refining was completed in a matter of hours.

GitHub Copilot helped with:

- Structuring the CLI interface with idiomatic Rust
- Generating sophisticated regex patterns for document classification
- Creating robust error handling for file operations
- Drafting clear, comprehensive documentation

Read the full story in [HOW_GITHUB_COPILOT_HELPED.md](HOW_GITHUB_COPILOT_HELPED.md)

## Document Classification

Maid identifies the following document types:

- **Rubrics**: Files containing "rubric", "assessment criteria", or "scoring guide" in the filename or content
- **Reports**: Files containing "report", "complete", "status", or "analysis" in the filename or content
- **Guides**: Files containing "guide", "how_to", "manual", "tutorial", or "instructions" in the filename or content
- **Summaries**: Files containing "summary", "overview", or "recap" in the filename or content
- **Scripts**: All shell scripts (.sh files)

## File Organization

When using the `--restructure` flag, Maid organizes files into the following structure:

- Markdown files:
  - Rubrics: `docs/rubrics/`
  - Reports: `docs/reports/`
  - Guides: `docs/guides/`
  - Summaries: `docs/summaries/`
- Shell scripts:
  - Setup/installation scripts: `scripts/setup/`
  - Test scripts: `scripts/tests/`
  - Build scripts: `scripts/build/`
  - Other scripts: `scripts/`

This organization makes it easy to find documentation and scripts by their purpose.

## Development

Maid is built with Rust and uses the following dependencies:

- **clap**: Command-line argument parsing
- **regex**: Regular expression matching for pattern recognition
- **walkdir**: Directory traversal for file discovery
- **anyhow**: Error handling with context
- **thiserror**: Error definitions
- **serde/serde_json**: Data serialization/deserialization
- **chrono**: Date and time handling
- **colored**: Terminal text coloring
- **indicatif**: Progress bars and indicators

### Project Structure

```
maid/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main.rs         # Main application code
‚îú‚îÄ‚îÄ Cargo.toml          # Rust package configuration
‚îú‚îÄ‚îÄ Cargo.lock          # Dependency lock file
‚îî‚îÄ‚îÄ README.md           # Documentation
```

### Building from Source

```bash
# Clone the repository
git clone https://github.com/Realvonmakeheat/maid.git
cd maid

# Build in debug mode
cargo build

# Build in release mode
cargo build --release

# Run tests
cargo test

# Install locally
cargo install --path .
```

### Contributing

Contributions are welcome! Here are some ways to contribute:

1. Report bugs and suggest features
2. Improve documentation
3. Submit pull requests with bug fixes or new features
4. Share use cases and examples

## License

This project is licensed under the GNU General Public License v3.0 - see the LICENSE file for details.

## Credits

Created by Realvonmakeheat, from the team that brought you Shrowd.
